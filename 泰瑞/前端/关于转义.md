## 关于转义
我们知道反斜杠是用来转义用的，比如在字符串里我们想表示空字符就使用'\b'，换行'\n'。同样，在提供给querySelector和querySelectorAll的参数也支持转义，了解这点非常重要。先看个例子，比如我们有个div它的样式类为'foo:bar'，当然我知道你一般不会这样写。当我们需要选择它的时候，就需要将其中的冒号进行转义，否则抛错。<div class="foo:bar"></div>![](https://cdn.nlark.com/yuque/0/2022/png/26798000/1663119013270-4a375f9c-4fa4-4b3c-adc4-1d9e3ccc34ec.png#clientId=ua6107080-1350-4&from=paste&id=u298f2978&originHeight=116&originWidth=731&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u7e0dc7fb-5826-473b-9b07-26601822bbe&title=)浏览器报怨表示不是一个合法的选择语句。同时，有趣的事情来了，或许你以为将冒号直接转义就解决问题了。![](https://cdn.nlark.com/yuque/0/2022/png/26798000/1663119013402-a59bff51-429b-4608-adfc-39e09ec91aa5.png#clientId=ua6107080-1350-4&from=paste&id=u55cd7070&originHeight=152&originWidth=723&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u4e4afc2c-dace-4c13-afe1-1a028f9307c&title=)同样，也表示非法。原因就在于反斜杠在字符串中本身就表示转义的意思，它于冒号结合转不出东西来，于是抛错。所以正确的做法是将反斜杠转义后'.foo\:bar'再传递给querySelector，后者在接收到'.foo\:bar'这个参数后，字符串将两个反斜杠转义成一个，然后querySelector前面得到的一个反斜杠与冒号结合进行转义得到正确结果。![](https://cdn.nlark.com/yuque/0/2022/png/26798000/1663119013398-4a472b18-abf4-47ff-9537-df25c1065371.png#clientId=ua6107080-1350-4&from=paste&id=u03e2d54a&originHeight=174&originWidth=743&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ucef387d0-e341-4e05-a275-cecd522cf01&title=)也就是说经历两次转义，一次是字符串当中，一次是querySelector解析参数时。理解这点后，可以来看一个更有趣的例子了。比如我们要选择类名里面含反斜杠的元素。是的，我们需要一共使用四个反斜杠！才能正常工作。<div class="foo\bar"></div>![](https://cdn.nlark.com/yuque/0/2022/png/26798000/1663119013234-e250a9ef-f6c8-49c6-a3bb-9a4a64f02499.png#clientId=ua6107080-1350-4&from=paste&id=u035fe020&originHeight=209&originWidth=719&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u6c883b33-c1fd-4466-938e-43283c5ca30&title=)
